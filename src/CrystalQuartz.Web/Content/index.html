<!DOCTYPE html>

<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>CrystalQuartz Panel</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

    <link href='CrystalQuartzPanel.axd?path=Styles.bootstrap.css' rel='stylesheet' type='text/css' />
	<link href='CrystalQuartzPanel.axd?path=Styles.main.css' rel='stylesheet' type='text/css' />

    <script type='text/javascript'>
		var timeout	= 500; var closetimer	= 0; var ddmenuitem	= 0;

		function mopen(id)
		{	
			mcancelclosetime();
			if(ddmenuitem) ddmenuitem.style.visibility = 'hidden';
			ddmenuitem = document.getElementById(id);
			ddmenuitem.style.visibility = 'visible';
		}
			
		function mclose()
		{
			if(ddmenuitem) ddmenuitem.style.visibility = 'hidden';
		}

		function mclosetime()
		{
			closetimer = window.setTimeout(mclose, timeout);
		}

		function mcancelclosetime()
		{
			if(closetimer)
			{
				window.clearTimeout(closetimer);
				closetimer = null;
			}
		}

		document.onclick = mclose; 
	</script>
</head>
<body>
	<div id="application"></div>


	<script type="text/view" id="ApplicationView">
		<header id="mainHeader" class="navbar navbar-static-top cq-main-header">
    <div class="container">
        <a href='/'>&larr; return to the site</a>
        <div id="mainLogo">
            <h1><a href='CrystalQuartzPanel.axd'>CrystalQuartz Panel</a></h1>
        </div>    
    </div>
</header>

<section id="mainContent" class="container">
    <section id="schedulerPropertiesContainer"></section>
    <section id='jobsContainer'></section>
</section>

<div id="dialogs"></div>

<footer id="mainFooter"></footer> 
	</script>
	<script type="text/view" id="JobGroupView">
		<article class="cq-job-group">
    <header class="cq-job-group-header">
        <h2 class="cq-job-group-header-title"></h2>
    </header>
    <section class="content"></section>
</article> 
	</script>
	<script type="text/view" id="JobView">
		<article class="cq-job">
    <header class="cq-job-header">
        <h3 class="cq-job-header-title"></h3>
    </header>

    <table class="cq-triggers triggers">
        <thead>
            <tr>
                <th>Name</th>
                <th>Status</th>
                <th>Start date</th>
                <th>End date</th>
                <th>Previous fire date</th>
                <th>Next fire date</th>
                <th></th>
            </tr>
        </thead>
        <tbody></tbody>
    </table>
</article> 
	</script>
	<script type="text/view" id="SchedulerView">
		<div id='schedulerProperties' class='cq-scheduler-panel'>
    <h2>
        <span class="schedulerName"></span>

        <span class='status'>
            <span></span>
        </span>
    </h2>
    
    <div class="row">
        <div class='cq-info-table col-sm-12 col-md-6'>
            <h4>Statistics</h4>
            <table>
                <tr>
                    <th>Running since:</th>
                    <td class="runningSince"></td>
                </tr>
                <tr>
                    <th>Total Jobs:</th>
                    <td class="totalJobs"></td>
                </tr>
                <tr>
                    <th>Executed Jobs:</th>
                    <td class="executedJobs"></td>
                </tr>
            </table>        
        </div>
        
        <div class='cq-info-table col-sm-12 col-md-6'>
			<h4>Properties</h4>
			<table>
				<tr>
					<th>Name:</th>
					<td class="schedulerName"></td>
				</tr>
				<tr>
					<th>Instance ID:</th>
					<td class="instanceId"></td>
				</tr>
				<tr>
					<th>Is remote:</th>
					<td class="isRemote"></td>
				</tr>
				<tr>
					<th>Scheduler type:</th>
					<td class="schedulerType"></td>
				</tr>
			</table>        
		</div>
    </div>
    

    <div class='primary'>
        
					
        <div>
            #if($data.CanStart)
            <div style='margin: 0 0 10px 0;'>Scheduler not started!</div>
            #end
            <div>
                #if($data.CanStart)
                <a id="startSchedulerButton" class='buttonLink' href="#">
                    <img alt='' src='CrystalQuartzPanel.axd?path=Images.start.png' />
                    Start scheduler
                </a>

                #end
                #if ($data.CanShutdown)
                <a id="stopSchedulerButton" class='buttonLink' href="#">
                    <img alt='' src='CrystalQuartzPanel.axd?file=CrystalQuartz.Web.Content.Images.shutdown.png&type=png' />
                    Shutdown
                </a>
                #end
            </div>
        </div>
					
    </div>

	<div class='secondary'>
		
	</div>
</div> 
	</script>
	<script type="text/view" id="TriggerView">
		<tr class="hidden-xs">
    <td class='name'></td>
    <td class="status"></td>
    <td class="startDate"></td>
    <td class="endDate"></td>
    <td class="previousFireDate"></td>
    <td class="nextFireDate"></td>
    <td class="actions">
        <a href="CrystalQuartzPanel.axd?command=trigger-pause&trigger=${trigger.Name}&group=${job.GroupName}">Pause</a>
        <a href="CrystalQuartzPanel.axd?command=trigger-resume&trigger=${trigger.Name}&group=${job.GroupName}">Resume</a>
    </td>
</tr> 
	</script>
	
	<script src="CrystalQuartzPanel.axd?path=Scripts.jquery-1.11.1.min.js"></script>
	<script src="CrystalQuartzPanel.axd?path=Scripts.john-smith-3.2.0.js"></script>
	<script src="CrystalQuartzPanel.axd?path=Scripts.lodash.compat.min.js"></script>
	<script src="CrystalQuartzPanel.axd?path=Scripts.application.js"></script>
	
</body>
</html>